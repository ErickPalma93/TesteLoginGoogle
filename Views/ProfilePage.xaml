<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:AppTeste.ViewModels"
             x:Class="AppTeste.Views.ProfilePage"
             x:DataType="viewmodels:ProfileViewModel"
             Title="Perfil">

    <ScrollView>
        <VerticalStackLayout
            Spacing="20"
            Padding="30"
            VerticalOptions="Center">

            <!-- Foto de Perfil -->
            <Frame
                CornerRadius="75"
                HeightRequest="150"
                WidthRequest="150"
                HorizontalOptions="Center"
                Padding="0"
                HasShadow="True"
                IsClippedToBounds="True">
                <Image
                    Source="{Binding User.ProfilePictureUrl}"
                    Aspect="AspectFill"/>
            </Frame>

            <!-- Nome do Usuário -->
            <Label
                Text="{Binding User.Name}"
                FontSize="28"
                FontAttributes="Bold"
                HorizontalOptions="Center"
                Margin="0,10,0,0"/>

            <!-- Email -->
            <Label
                Text="{Binding User.Email}"
                FontSize="16"
                TextColor="Gray"
                HorizontalOptions="Center"/>

            <!-- Card com Informações -->
            <Frame
                BackgroundColor="#F5F5F5"
                BorderColor="Transparent"
                CornerRadius="12"
                Padding="20"
                Margin="0,20,0,0">

                <VerticalStackLayout Spacing="15">

                    <!-- ID do Usuário -->
                    <HorizontalStackLayout Spacing="10">
                        <Label
                            Text="ID:"
                            FontAttributes="Bold"
                            WidthRequest="100"/>
                        <Label
                            Text="{Binding User.Id}"
                            LineBreakMode="TailTruncation"/>
                    </HorizontalStackLayout>

                    <!-- Data de Login -->
                    <HorizontalStackLayout Spacing="10">
                        <Label
                            Text="Login em:"
                            FontAttributes="Bold"
                            WidthRequest="100"/>
                        <Label
                            Text="{Binding User.AuthenticatedAt, StringFormat='{0:dd/MM/yyyy HH:mm}'}"/>
                    </HorizontalStackLayout>

                    <!-- Status do Token -->
                    <HorizontalStackLayout Spacing="10">
                        <Label
                            Text="Status:"
                            FontAttributes="Bold"
                            WidthRequest="100"/>
                        <Label
                            Text="{Binding TokenStatus}"
                            TextColor="{Binding TokenStatusColor}"/>
                    </HorizontalStackLayout>

                </VerticalStackLayout>
            </Frame>

            <!-- Botão de Logout -->
            <Button
                Text="Sair"
                Command="{Binding LogoutCommand}"
                BackgroundColor="#F44336"
                TextColor="White"
                FontSize="16"
                FontAttributes="Bold"
                HeightRequest="50"
                CornerRadius="25"
                Margin="0,30,0,0"/>

            <!-- Indicador de Carregamento -->
            <ActivityIndicator
                IsRunning="{Binding IsLoading}"
                IsVisible="{Binding IsLoading}"
                Color="{StaticResource Primary}"
                HeightRequest="40"
                Margin="0,20,0,0"/>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>